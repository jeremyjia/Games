<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tone.js Virtual Piano</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        /* 简单的键盘样式 */
        .keyboard {
            display: flex;
            flex-wrap: wrap;
        }
        .key {
            width: 50px;
            height: 150px;
            margin: 5px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
        }
        .key:active {
            background-color: #e0e0e0;
        }
    </style>
</head>
<body>
    <button id="id4cls" onclick = "fnCls(this);">cls</button>
    <div class="keyboard" id="pianoKeyboard"></div>

    <script>
        const fnCls = function(e){ 
            
            oSynth.triggerAttack('E4');
            if(oSynth.ck) oSynth.triggerRelease(oSynth.ck);
        }
        // 引入Tone.js
        // 假设Tone.js已经通过CDN引入

        // 创建一个合成器，这里使用Tone.Synth，也可以尝试其他合成器如Tone.AMSynth, Tone.FMSynth等
        const oSynth = new Tone.FMSynth().toDestination();

        // 定义一个简单的键盘布局
        // 这里只列出了部分键，你可以根据需要添加更多
        const keys = [
            'C4', 'D4', 'E4', 'F4', 'G4', 'A4', 'B4',
            'C5', 'D5', 'E5', 'F5', 'G5', 'A5', 'B5'
        ];

        // 创建键盘UI
        const pianoKeyboard = document.getElementById('pianoKeyboard');
        keys.forEach(key => {
            const keyElement = document.createElement('div');
            keyElement.className = 'key';
            keyElement.textContent = key;
            keyElement.addEventListener('mousedown', () => {
                oSynth.triggerAttack(key);
                oSynth.ck = key;
            });
            keyElement.addEventListener('mouseup', () => {
                oSynth.triggerRelease(key);
            });
            // 为了更好的用户体验，可以添加鼠标按下和松开的样式变化
            keyElement.addEventListener('mouseenter', () => {
                keyElement.style.backgroundColor = '#d0d0d0'; 
            });
            keyElement.addEventListener('mouseleave', () => {
                keyElement.style.backgroundColor = '#f0f0f0'; 
            });
            pianoKeyboard.appendChild(keyElement);
        });

        // 注意：在真实的项目中，你可能需要处理键盘按键事件，以便用户可以使用电脑键盘来演奏虚拟钢琴。
        // 这可以通过添加keydown和keyup事件监听器到window对象来实现。
    </script>
</body>
</html>